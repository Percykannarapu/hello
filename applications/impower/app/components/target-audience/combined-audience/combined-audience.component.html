<div class="ui-g">
    <val-edit-combined-audiences [editAudiences]="combinedAudiences$ | async" 
                                 (onEdit)="onEdit($event)"
                                 (onDelete)="onDelete($event)">
    </val-edit-combined-audiences>
</div>
<form novalidate  [formGroup]="audienceForm" autocomplete="off">
<div class="ui-g">
<div class="ui-g-12" >
    <input type="hidden" formControlName="audienceId">  
</div>
<div class="ui-g-12" >
    <span class="md-inputfield">
      <input id="audienceName" type="text" formControlName="audienceName" pInputText size="40">
      <span class="ui-inputgroup-addon" *ngIf="!hasErrors('audienceName')">&nbsp;</span>
     <label for="audienceName">New Audience Name (required)</label>
    </span>
    <span class="validation-messages">
        <span *ngIf="isDuplicateName" >
            Duplicate audience name, please rename your variable
            </span>
        </span>
</div>
<div class="ui-g-12"> 
<p-listbox [options]="groupedAudiences$ | async" [(ngModel)]="selectedColumns" formControlName="audienceList" [listStyle]="{'max-height':'250px'}" [style]="{width:'40em'}" multiple="multiple" checkbox="checkbox" filter="filter"></p-listbox>
<span class="validation-messages">
    <span *ngIf="showError">
        Only percent variables can be combined, please fix your selection
        </span>
    </span>
</div>
<div class="ui-g-12">
    <span class="md-inputfield">
      <p-dropdown [options]="allIndexValues" optionLabel="label" formControlName="selectedIndex" styleClass="val-min-width" [(ngModel)]="selectedOperation"  placeholder="&nbsp;" dropdownIcon="fa fa-caret-down" ></p-dropdown>
      <label for="selectedIndex">Select Index Base</label>
    </span>
  </div>
<div class="ui-g-4" >
    <button type="button" (click)="resetForm()" pButton icon="ui-icon-send" label="Clear Selections"></button>
</div>
<div *ngIf="hasAudienceSelections" class="ui-g-8">
    <button type="button" pButton label="Create Variable" [disabled]= "isDisabled()" (click)="submitAudiences(audienceForm.value)" ></button>
</div> 
</div>
</form>
