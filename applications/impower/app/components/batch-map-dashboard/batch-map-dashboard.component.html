<p-dialog [(visible)]="showDialog" (visibleChange)="closeDialog()" [modal]="true" [draggable]="true" [closable]="true" [resizable]="false" [dismissableMask]="true">
  <p-header>
    Batch Map Status
  </p-header>
  <div>
    <p-table #statusGrid [columns]="allColumns" [value]="printJobDetails"
             [(selection)]="selectedRow"
             [scrollable]="true"
             selectionMode="single"
             dataKey="projectId"
             [resizableColumns]="false"
             [reorderableColumns]="false"
             [paginator]="true" [rows]="10">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <ng-container *ngFor="let col of columns" [ngSwitch]="col.field">
            <th *ngSwitchCase="'url'" [style.width]="col.size">
              {{col.header}}
            </th>
            <th *ngSwitchCase="'jobNumber'" [style.width]="col.size">
              {{col.header}}
            </th>
            <th *ngSwitchDefault [pSortableColumn]="col.field" [style.width]="col.size">
              <span>
                {{col.header}}
                <p-sortIcon [field]="col.field"></p-sortIcon>
              </span>
            </th>
          </ng-container>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr>
          <td *ngFor="let col of columns" [ngSwitch]="col.field" [style.width]="col.size">
            <span *ngSwitchCase="'elapsedTime'" pTooltip="{{rowData['elapsedTimeTooltip']}}">
              {{rowData[col.field]}}
            </span>
            <span *ngSwitchCase="'jobNumber'" pTooltip="{{rowData['jobNumber']}}" tooltipPosition="top">
              <button pButton class="p-button-link" (click)="copy(rowData['jobNumber'])" label="{{rowData['jobNumShort']}}"></button>
            </span>
            <span *ngSwitchCase="'createDate'">
              {{ rowData[col.field] | date:'MM/dd/YY hh:mm a' }}
            </span>
            <div *ngSwitchCase="'url'" class="p-d-flex p-flex-column">
              <span *ngIf="isDisable(rowData)">
                <button pButton class="p-button-link p-button-sm" label="PDF Download" (click)="downloadPdf(rowData[col.field], rowData['jobNumber'])"></button>
              </span>
              <span *ngIf="validateZipUrl(rowData)">
                <button pButton class="p-button-link p-button-sm" label="ZIP Download" (click)="downloadZIP(rowData['zipUrl'], rowData)"></button>
              </span>
            </div>
            <span *ngSwitchCase="'cancel'">
              <button pButton class="p-button-sm" label="cancel" (click)="cancel(rowData)" [disabled]="refreshButton(rowData)"></button>
            </span>
            <span *ngSwitchCase="'refresh'">
              <button pButton class="p-button-sm p-button-icon-only p-button-rounded" icon="pi pi-refresh" (click)="refresh(rowData)" [disabled]="refreshButton(rowData)"></button>
            </span>
            <span *ngSwitchDefault>
              {{rowData[col.field]}}
            </span>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage" let-columns>
        <tr>
          <td [attr.colspan]="columns.length">
            <div class="p-col-12" *ngIf="gettingData">
              <h5>Loading...</h5>
              <p-progressSpinner></p-progressSpinner>
            </div>
            <div class="p-col-12" *ngIf="!gettingData">
              <h5>No results</h5>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</p-dialog>
