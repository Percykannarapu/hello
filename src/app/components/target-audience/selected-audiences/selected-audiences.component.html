<div class="ui-g">
  <div *ngIf="hasAudiences" class="card ui-g-12">
    <p-dataTable [value]="audiences$ | async"
                 [resizableColumns]="true"
                 [rows]="10"
                 [paginator]="true"
                 [alwaysShowPaginator]="false"
                 [immutable]="false"
                 columnResizeMode="expand">
      <p-column header="Map" field="showOnMap" [style]="{ width: '10%' }">
        <ng-template let-col let-audience="rowData" pTemplate="body">
          <p-checkbox [(ngModel)]="audience[col.field]" [binary]="true" (onChange)="onMapSelected(audience)"></p-checkbox>
        </ng-template>
      </p-column>
      <p-column header="Grid" field="showOnGrid" [style]="{ width: '10%' }">
        <ng-template let-col let-audience="rowData" pTemplate="body">
          <p-checkbox [(ngModel)]="audience[col.field]" binary="true" [disabled]="true"></p-checkbox>
        </ng-template>
      </p-column>
      <p-column header="Export" field="exportInGeoFootprint" [style]="{ width: '10%' }">
        <ng-template let-col let-audience="rowData" pTemplate="body">
          <p-checkbox [(ngModel)]="audience[col.field]" binary="true" [disabled]="true"></p-checkbox>
        </ng-template>
      </p-column>
      <p-column header="National" field="exportNationally" [style]="{ width: '10%' }">
        <ng-template let-col let-audience="rowData" pTemplate="body">
          <p-checkbox *ngIf="audience.allowNationalExport" [(ngModel)]="audience[col.field]" binary="true" (onChange)="onNationalSelected(audience)"></p-checkbox>
        </ng-template>
      </p-column>
      <p-column header="Audience Name" field="audienceName" [style]="{ width: '30%' }"></p-column>
      <p-column header="Source" [style]="{ width: '30%' }">
        <ng-template let-col let-audience="rowData" pTemplate="body">
          {{audience.audienceSourceType}}: {{audience.audienceSourceName}}
        </ng-template>
      </p-column>
    </p-dataTable>
  </div>

  <div *ngIf="showRenderControls" class="card ui-g-12">
    <div class="ui-g-6">
      <div class="ui-g-4"><label>Theme</label></div>
      <div class="ui-g-8">
        <p-dropdown [options]="allThemes"
                    (onChange)="onThemeChange($event)"
                    [autoWidth]="false"
                    [style]="{'width':'200px'}"></p-dropdown>
      </div>
    </div>
    <div class="ui-g-6">
      <!--<div class="ui-g-4"><label>Opacity</label></div>-->
      <!--<div class="ui-g-8">-->
        <!--<p class="sliderLabel">{{currentOpacity}} %</p>-->
        <!--<p-slider [ngModel]="currentOpacity"-->
                  <!--(ngModelChange)="onOpacityChange($event)"></p-slider>-->
      <!--</div>-->
    </div>
  </div>

  <button *ngIf="hasAudiences" pButton label="Apply Audience Selections" (click)="onApplyClicked()"></button>

  <div *ngIf="!hasAudiences" class="ui-g-12">
    Please select or upload Audience Data from one of the other tabs.
  </div>

</div>
